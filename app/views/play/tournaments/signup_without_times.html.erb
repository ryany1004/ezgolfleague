<ol class="breadcrumb">
  <li><%= link_to "My Dashboard", play_dashboard_index_path %></li>
  <li><%= link_to @tournament.name, play_tournament_path(@tournament) %></li>
  <li class="active">Register for Tournament</li>
</ol>

<h4>Available Slots for <%= @tournament.name %></h4>

<% @tournament.first_day.tournament_groups.each_with_index do |group, j| %>
  <% if j == 0 -%>
  <h4>Early</h4>
  <% elsif j == (@tournament.first_day.tournament_groups.count / 3) -%>
  <h4>Middle</h4>
  <% elsif j == (@tournament.first_day.tournament_groups.count / 3) * 2 -%>
  <h4>Late</h3>
  <% end -%>
  <table class="table table-striped table-bordered">
  	<thead>
  		<tr>
  			<th width="70%">Players</th>
        <th width="30%">Register</th>
  		</tr>
  	</thead>
    <tbody>
      <% group.players_signed_up.each do |player| -%>
      <tr>
        <td><%= player.complete_name %></td>
        <% if player == current_user -%>
        <td><%= link_to "Cancel Registration", play_tournament_remove_signup_path(@tournament), :data => { :confirm => 'Are you sure you want to cancel this registration?' }, :method => :delete %></td>
        <% else -%>
        <td>Booked</td>
        <% end -%>
      </tr>
      <% end %>
      <% (group.max_number_of_players - group.players_signed_up.count).abs.times.each_with_index do |item, i| -%>
      <tr>
        <td>Time Available</td>
        <% if @tournament.includes_player?(current_user) == false -%>
        <td><button type="button" class="btn btn-primary btn" data-toggle="modal" data-target="#Group<%= group.id %>">Register Tee Time</button></td>
        </td>
        <% else -%>
        <td>&nbsp;</td>
        <% end -%>
      </tr>
      <% end -%>
    </tbody>
  </table>  
<% end %>

<% @tournament.first_day.tournament_groups.each do |group| %>  
  <%= render partial: 'signup_modal', locals: {tournament: @tournament, group: group} %>
<% end -%>