<table class="table table-striped">
	<thead>
		<tr>
			<th>Name</th>
      <th>Course</th>
      <th>When</th>
      <% if is_current == true -%>
      <th>Scorecard</th>
      <th>Score</th>
      <% elsif is_previous == true -%>
      <th>Scorecard</th>
      <th>Score</th>
      <th>Points</th>
      <% else -%>
      <th>Register</th>
      <% end -%>
		</tr>
	</thead>
  <tbody>
    <% tournaments.each do |t| %>
    <tr>
      <td><%= link_to t.name, play_tournament_path(t) %></td>
      <td><%= t.course.name %></td>
      <td><%= t.tournament_at.to_s(:date_and_time) %></td>
      <% if is_current == true -%>
        <% if t.includes_player?(current_user) -%>
        <% if t.is_finalized -%>
        <td><%= link_to "View", play_scorecard_path(t.primary_scorecard_for_user(current_user)) %></td>
        <% else -%>
        <td><%= link_to "Edit", edit_play_scorecard_path(t.primary_scorecard_for_user(current_user)) %></td>
        <% end -%>
        <td><%= t.player_score(current_user) %></td>
        <% else %>
        <td>N/A</td>
        <td>N/A</td>
        <% end -%>
      <% elsif is_previous == true -%>
        <% if t.includes_player?(current_user) -%>
        <td><%= link_to "View", play_scorecard_path(t.primary_scorecard_for_user(current_user)) %></td>
        <td><%= t.player_score(current_user) %></td>
        <td><%= t.player_points(current_user) %></td>
        <% else %>
        <td>N/A</td>
        <td>N/A</td>
        <td>N/A</td>
        <% end -%>
      <% else -%>
      <td>
        <% if t.is_open_for_registration? -%>
          <% if !t.includes_player?(current_user) -%>
           <%= link_to "Register", play_tournament_signup_path(t) %>
          <% else %>
           <%= link_to "View", play_tournament_signup_path(t) %> | <%= link_to "Cancel", play_tournament_remove_signup_path(t), :data => { :confirm => 'Are you sure you want to cancel this registration?' }, :method => :delete %> | (Unpaid)
          <% end -%>
        <% else -%>
          <% if t.number_of_players >= t.max_players -%>
            Full
          <% else -%>
            <%= t.signup_opens_at.to_s(:date_and_time) %>
          <% end -%>
        <% end -%>
      </td>
      <% end -%>
    </tr>
    <% end %>
  </tbody>
</table>