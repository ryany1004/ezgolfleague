<ol class="breadcrumb">
  <li><%= link_to "Tournaments", league_tournaments_path(current_user.selected_league) %></li>
  <li><%= link_to @tournament.name, edit_league_tournament_path(current_user.selected_league, @tournament) %></li>
  <li class="active"><%= @contest.name %> Registrations</li>
</ol>

<div class="col-md-12">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title"><%= @contest.name %> Registrants</h3>
    </div>
    <table class="table table-striped">
    	<thead>
    		<tr>
    			<th>Name</th>
          <th>Amount Paid</th>
          <th><button type="button" class="btn btn-primary btn" data-toggle="modal" data-target="#ContestSignup">Add Contestant</button></th>
    		</tr>
    	</thead>
    	<tbody>
    	<% @contest.users.each do |user| %>
    		<tr>
    			<td><%= user.complete_name %></td>
          <td><%= number_to_currency(@contest.dues_for_user(user)) %></td>
          <td><%= link_to 'Remove Contestant', league_tournament_contest_remove_registration_path(@tournament.league, @tournament, @contest, user: user, tournament_day: @tournament_day), data: { confirm: 'Are you sure you want to remove this user from this contest?' }, method: :delete %></td>
    		</tr>
    	<% end %>
    	</tbody>
    </table>
  </div>
</div>

<%= simple_form_for :contest_registration, url: league_tournament_contest_add_registration_path(@tournament.league, @tournament, @contest, tournament_day: @tournament_day), method: :post do |f| %>
<div class="modal fade" id="ContestSignup" role="dialog" aria-labelledby="gridSystemModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="gridSystemModalLabel">Register for Contest</h4>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div class="well">
                <p>Add a user to this contest:</p>
                <%= f.input :another_member_id, label: false, collection: @unregistered_users, label_method: :complete_name, value_method: :id, include_blank: true, input_html: { class: 'chosen-select' } %>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <%= f.button :button, "Register", class: "btn btn-default", :value => true %>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<% end %>
